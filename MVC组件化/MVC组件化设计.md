### MVC组件化设计

#### 一、痛点

- 代码结构复杂，耦合度高：继承
- 可重用性，内聚性差：相同的代码散落在各个模块
- 每个人标准不一样，读代码困难
- 维护不方便，一个功能多处实现


#### 二、不优雅的设计方式：继承或者传统的组合方式

###### 问题：

- 传递函数调用，需要函数申明，当接口变化时，调用方需要变化
- 重写函数：可读性差，容易出错


#### 二、组件

​     **概念**

- 组件是对逻辑的封装，不限于图形元素。即我们可以把if做成组件、把一个倒计时做成组件、把一段动画做成组件、把路由做成组件、把数据架构做成组件，而这些并不能称为控件;**统一了图形元素与非图形元素**
- 组件必须具备高可重用性，也即单个可移植性，即“随加载随用”，不需要为其准备复杂的基础条件（如引入样式、引入框架等）。然而这一点现有那些所谓组件库做得并不好，技术上也不大现实
- 组件是声明式定义的，而非命令式。

​    **优点**

- 降低耦合度，提高内聚性
    **内聚性**:在一个子程序中，各种操作之间互相联系的紧密程度（代码大全）。

- 提高复用性

    **与模块的区别：**

    | 类别 | 目的       | 特点           | 接口       | 成果               | 架构定位 |
    | ---- | ---------- | -------------- | ---------- | ------------------ | -------- |
    | 组件 | 重用、解耦 | 高重用、松耦合 | 无统一接口 | 基础库、基础组件   | 纵向分层 |
    | 模块 | 隔离/封装  | 高内聚、松耦合 | 统一接口   | 业务框架、业务模块 | 横向分块 |

- 一个消息在整个软件里只能在一处出现，其它地方组合它来处理消息。便于查找和维护


#### 三、设计原则

- 单一职责：MVC各司其职，一一对应，View负责用户交互，C负责V和M通讯，M负责数据
- 最少知道原则：View和Model只知道Controller，Controller只知道自己对应的Model和View
- 开闭原则：组件修改了，调用方不需要修改
- 组件化：每个MVC都是一个组件，可以重用

#### 四、架构

- 数据更新流程

![屏幕快照 2018-04-13 下午2.46.38](/Users/linjinxing493/Desktop/屏幕快照 2018-04-13 下午2.46.38.png)

- 类图

![屏幕快照 2018-04-13 上午9.00.13](/Users/linjinxing493/Desktop/屏幕快照 2018-04-13 上午9.00.13.png)



#### 五、事件传递处理详解

![屏幕快照 2018-04-13 上午10.43.39](/Users/linjinxing493/Desktop/屏幕快照 2018-04-13 上午10.43.39.png)

